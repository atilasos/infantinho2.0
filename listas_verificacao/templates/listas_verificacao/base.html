{% extends "base.html" %}
{% load static %}

{% block extra_css %}
<style>
    .objetivo-card {
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        padding: 1rem;
        margin-bottom: 1rem;
        background-color: white;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        transition: transform 0.2s;
    }
    
    .objetivo-card:hover {
        transform: translateY(-2px);
    }
    
    .status-badge {
        display: inline-block;
        padding: 0.25rem 0.75rem;
        border-radius: 1rem;
        font-size: 0.875rem;
        font-weight: 500;
    }
    
    .status-nao-iniciado {
        background-color: #f3f4f6;
        color: #6b7280;
    }
    
    .status-em-progresso {
        background-color: #dbeafe;
        color: #1e40af;
    }
    
    .status-concluido {
        background-color: #dcfce7;
        color: #166534;
    }
    
    .status-validado {
        background-color: #fef3c7;
        color: #92400e;
    }
    
    .dominio-section {
        margin-bottom: 2rem;
        padding: 1.5rem;
        background-color: #f8fafc;
        border-radius: 12px;
    }
    
    .dominio-header {
        display: flex;
        align-items: center;
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 2px solid #e2e8f0;
    }
    
    .dominio-codigo {
        font-size: 1.5rem;
        font-weight: 700;
        color: #1e293b;
        margin-right: 1rem;
    }
    
    .dominio-nome {
        font-size: 1.25rem;
        color: #475569;
    }
    
    .progress-bar {
        height: 8px;
        background-color: #e2e8f0;
        border-radius: 4px;
        overflow: hidden;
        margin-top: 0.5rem;
    }
    
    .progress-fill {
        height: 100%;
        background-color: #3b82f6;
        transition: width 0.3s ease;
    }
    
    .avaliacao-form {
        background-color: white;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    
    .avaliacao-item {
        padding: 1rem;
        border-left: 4px solid #3b82f6;
        margin-bottom: 1rem;
        background-color: #f8fafc;
        border-radius: 0 8px 8px 0;
    }
</style>
{% endblock %}

{% block content %}
<div class="container mx-auto px-4 py-8">
    {% block listas_content %}{% endblock %}
</div>
{% endblock %}

{% block extra_js %}
<script>
    function atualizarStatus(objetivoId, novoStatus) {
        fetch(`/listas-verificacao/objetivo/${objetivoId}/atualizar-status/`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
                'X-CSRFToken': document.querySelector('[name=csrfmiddlewaretoken]').value
            },
            body: `status=${novoStatus}`
        })
        .then(response => response.json())
        .then(data => {
            if (data.error) {
                alert(data.error);
                return;
            }
            
            const statusBadge = document.querySelector(`#status-${objetivoId}`);
            statusBadge.className = `status-badge status-${data.status}`;
            statusBadge.textContent = data.status.replace('_', ' ').replace(/\b\w/g, l => l.toUpperCase());
        })
        .catch(error => {
            console.error('Error:', error);
            alert('Erro ao atualizar status');
        });
    }
</script>
{% endblock %} 